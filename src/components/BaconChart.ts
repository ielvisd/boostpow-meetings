import { defineComponent, h, PropType, ref } from "vue";

import { Line } from "vue-chartjs";
import {
  Chart as ChartJS,
  Title,
  Tooltip,
  Legend,
  LineElement,
  LinearScale,
  PointElement,
  CategoryScale,
  Plugin,
} from "chart.js";

ChartJS.register(
  Title,
  Tooltip,
  Legend,
  LineElement,
  LinearScale,
  PointElement,
  CategoryScale
);

const bsvData = [
  {
    Date: "2018-12-01",
    Open: 95.110397,
    High: 134.587875,
    Low: 64.519569,
    Close: 84.956306,
    "Adj Close": 84.956306,
    Volume: 3933121780,
    "Average Price": 63.2522545,
    year: 2018,
    Period: "M01",
  },
  {
    Date: "2019-01-01",
    Open: 84.785568,
    High: 96.276894,
    Low: 61.98494,
    Close: 63.975952,
    "Adj Close": 63.975952,
    Volume: 2288672815,
    "Average Price": 59.749079,
    year: 2019,
    Period: "M01",
  },
  {
    Date: "2019-02-01",
    Open: 64.062965,
    High: 75.903381,
    Low: 57.513218,
    Close: 67.315666,
    "Adj Close": 67.315666,
    Volume: 2680394262,
    "Average Price": 60.248516,
    year: 2019,
    Period: "M02",
  },
  {
    Date: "2019-03-01",
    Open: 67.250298,
    High: 71.894714,
    Low: 62.983814,
    Close: 64.982018,
    "Adj Close": 64.982018,
    Volume: 2940442207,
    "Average Price": 56.6368045,
    year: 2019,
    Period: "M03",
  },
  {
    Date: "2019-04-01",
    Open: 64.971001,
    High: 95.136093,
    Low: 50.289795,
    Close: 54.193066,
    "Adj Close": 54.193066,
    Volume: 4987101456,
    "Average Price": 51.032158,
    year: 2019,
    Period: "M04",
  },
  {
    Date: "2019-05-01",
    Open: 54.198193,
    High: 251.067413,
    Low: 51.774521,
    Close: 195.788086,
    "Adj Close": 195.788086,
    Volume: 10488313573,
    "Average Price": 115.4200515,
    year: 2019,
    Period: "M05",
  },
  {
    Date: "2019-06-01",
    Open: 195.776123,
    High: 255.881409,
    Low: 179.065582,
    Close: 194.203125,
    "Adj Close": 194.203125,
    Volume: 17464324057,
    "Average Price": 142.883976,
    year: 2019,
    Period: "M06",
  },
  {
    Date: "2019-07-01",
    Open: 194.203125,
    High: 213.546188,
    Low: 106.70237,
    Close: 147.976563,
    "Adj Close": 147.976563,
    Volume: 12298105102,
    "Average Price": 113.666695,
    year: 2019,
    Period: "M07",
  },
  {
    Date: "2019-08-01",
    Open: 148.032608,
    High: 160.492935,
    Low: 120.63102,
    Close: 129.413422,
    "Adj Close": 129.413422,
    Volume: 9800867820,
    "Average Price": 95.803894,
    year: 2019,
    Period: "M08",
  },
  {
    Date: "2019-09-01",
    Open: 129.38591,
    High: 138.176636,
    Low: 70.976768,
    Close: 87.420975,
    "Adj Close": 87.420975,
    Volume: 8942441764,
    "Average Price": 76.04084,
    year: 2019,
    Period: "M09",
  },
  {
    Date: "2019-10-01",
    Open: 87.472183,
    High: 150.129517,
    Low: 81.104912,
    Close: 129.789948,
    "Adj Close": 129.789948,
    Volume: 13274575447,
    "Average Price": 85.2760505,
    year: 2019,
    Period: "M10",
  },
  {
    Date: "2019-11-01",
    Open: 129.710205,
    High: 141.750702,
    Low: 89.447189,
    Close: 107.680237,
    "Adj Close": 107.680237,
    Volume: 16671380050,
    "Average Price": 83.8193245,
    year: 2019,
    Period: "M11",
  },
  {
    Date: "2019-12-01",
    Open: 107.6959,
    High: 107.700226,
    Low: 78.19146,
    Close: 97.078827,
    "Adj Close": 97.078827,
    Volume: 12926100907,
    "Average Price": 85.153019,
    year: 2019,
    Period: "M12",
  },
  {
    Date: "2020-01-01",
    Open: 97.078827,
    High: 441.196564,
    Low: 92.114578,
    Close: 272.39621,
    "Adj Close": 272.39621,
    Volume: 70563263336,
    "Average Price": 150.872711,
    year: 2020,
    Period: "M01",
  },
  {
    Date: "2020-02-01",
    Open: 272.911743,
    High: 379.498291,
    Low: 209.630844,
    Close: 212.291992,
    "Adj Close": 212.291992,
    Volume: 77898424195,
    "Average Price": 148.8511545,
    year: 2020,
    Period: "M02",
  },
  {
    Date: "2020-03-01",
    Open: 212.322708,
    High: 258.112885,
    Low: 88.071465,
    Close: 165.404602,
    "Adj Close": 165.404602,
    Volume: 74100659748,
    "Average Price": 123.673359,
    year: 2020,
    Period: "M03",
  },
  {
    Date: "2020-04-01",
    Open: 165.404602,
    High: 226.782516,
    Low: 159.275253,
    Close: 208.301544,
    "Adj Close": 208.301544,
    Volume: 70699378079,
    "Average Price": 167.077789,
    year: 2020,
    Period: "M04",
  },
  {
    Date: "2020-05-01",
    Open: 208.301544,
    High: 218.085083,
    Low: 174.880325,
    Close: 193.136215,
    "Adj Close": 193.136215,
    Volume: 57709875515,
    "Average Price": 164.617035,
    year: 2020,
    Period: "M05",
  },
  {
    Date: "2020-06-01",
    Open: 193.129608,
    High: 207.659439,
    Low: 154.353745,
    Close: 158.150452,
    "Adj Close": 158.150452,
    Volume: 35117807601,
    "Average Price": 153.1447835,
    year: 2020,
    Period: "M06",
  },
  {
    Date: "2020-07-01",
    Open: 158.506104,
    High: 230.53093,
    Low: 151.935822,
    Close: 229.836899,
    "Adj Close": 229.836899,
    Volume: 39356434995,
    "Average Price": 168.090439,
    year: 2020,
    Period: "M07",
  },
  {
    Date: "2020-08-01",
    Open: 229.836899,
    High: 252.975143,
    Low: 184.245056,
    Close: 192.845444,
    "Adj Close": 192.845444,
    Volume: 34703251293,
    "Average Price": 163.886139,
    year: 2020,
    Period: "M08",
  },
  {
    Date: "2020-09-01",
    Open: 192.798553,
    High: 207.113968,
    Low: 143.527222,
    Close: 171.84967,
    "Adj Close": 171.84967,
    Volume: 28231182746,
    "Average Price": 149.6243365,
    year: 2020,
    Period: "M09",
  },
  {
    Date: "2020-10-01",
    Open: 171.817688,
    High: 184.540085,
    Low: 155.721451,
    Close: 164.869537,
    "Adj Close": 164.869537,
    Volume: 25170690086,
    "Average Price": 151.202263,
    year: 2020,
    Period: "M10",
  },
  {
    Date: "2020-11-01",
    Open: 164.869537,
    High: 216.649689,
    Low: 146.683075,
    Close: 182.558167,
    "Adj Close": 182.558167,
    Volume: 25293696473,
    "Average Price": 148.9146575,
    year: 2020,
    Period: "M11",
  },
  {
    Date: "2020-12-01",
    Open: 182.587158,
    High: 195.894882,
    Low: 151.14624,
    Close: 163.632034,
    "Adj Close": 163.632034,
    Volume: 17936882249,
    "Average Price": 154.8342055,
    year: 2020,
    Period: "M12",
  },
  {
    Date: "2021-01-01",
    Open: 163.60524,
    High: 324.542206,
    Low: 158.522171,
    Close: 173.860458,
    "Adj Close": 173.860458,
    Volume: 42236027836,
    "Average Price": 164.00914,
    year: 2021,
    Period: "M01",
  },
  {
    Date: "2021-02-01",
    Open: 173.856476,
    High: 282.137909,
    Low: 169.496109,
    Close: 177.448685,
    "Adj Close": 177.448685,
    Volume: 39503338885,
    "Average Price": 172.826355,
    year: 2021,
    Period: "M02",
  },
  {
    Date: "2021-03-01",
    Open: 177.48114,
    High: 233.738754,
    Low: 176.156601,
    Close: 217.08876,
    "Adj Close": 217.08876,
    Volume: 26549448537,
    "Average Price": 191.449478,
    year: 2021,
    Period: "M03",
  },
  {
    Date: "2021-04-01",
    Open: 217.09375,
    High: 491.635376,
    Low: 206.742355,
    Close: 323.670746,
    "Adj Close": 323.670746,
    Volume: 59092953175,
    "Average Price": 168.041481,
    year: 2021,
    Period: "M04",
  },
  {
    Date: "2021-05-01",
    Open: 323.641663,
    High: 457.2388,
    Low: 129.340607,
    Close: 174.938431,
    "Adj Close": 174.938431,
    Volume: 61384597932,
    "Average Price": 118.4841045,
    year: 2021,
    Period: "M05",
  },
  {
    Date: "2021-06-01",
    Open: 174.916962,
    High: 191.480484,
    Low: 107.627602,
    Close: 146.908524,
    "Adj Close": 146.908524,
    Volume: 24052134806,
    "Average Price": 109.721222,
    year: 2021,
    Period: "M06",
  },
  {
    Date: "2021-07-01",
    Open: 146.948868,
    High: 153.990097,
    Low: 111.814842,
    Close: 141.753128,
    "Adj Close": 141.753128,
    Volume: 11886477043,
    "Average Price": 123.204479,
    year: 2021,
    Period: "M07",
  },
  {
    Date: "2021-08-01",
    Open: 141.620987,
    High: 213.438889,
    Low: 134.594116,
    Close: 169.164474,
    "Adj Close": 169.164474,
    Volume: 12631307369,
    "Average Price": 126.7391965,
    year: 2021,
    Period: "M08",
  },
  {
    Date: "2021-09-01",
    Open: 169.125488,
    High: 202.196945,
    Low: 118.884277,
    Close: 129.408997,
    "Adj Close": 129.408997,
    Volume: 12262042882,
    "Average Price": 123.681015,
    year: 2021,
    Period: "M09",
  },
  {
    Date: "2021-10-01",
    Open: 129.445511,
    High: 185.218994,
    Low: 128.477753,
    Close: 165.510361,
    "Adj Close": 165.510361,
    Volume: 9710947213,
    "Average Price": 135.227005,
    year: 2021,
    Period: "M10",
  },
  {
    Date: "2021-11-01",
    Open: 165.53743,
    High: 198.756165,
    Low: 141.976257,
    Close: 150.092392,
    "Adj Close": 150.092392,
    Volume: 6489350436,
    "Average Price": 112.92305,
    year: 2021,
    Period: "M11",
  },
  {
    Date: "2021-12-01",
    Open: 149.958023,
    High: 175.417633,
    Low: 83.869843,
    Close: 121.182472,
    "Adj Close": 121.182472,
    Volume: 12226159483,
    "Average Price": 83.964676,
    year: 2021,
    Period: "M12",
  },
  {
    Date: "2022-01-01",
    Open: 121.192055,
    High: 125.227592,
    Low: 84.059509,
    Close: 91.430992,
    "Adj Close": 91.430992,
    Volume: 4024762049,
    "Average Price": 79.3148345,
    year: 2022,
    Period: "M01",
  },
  {
    Date: "2022-02-01",
    Open: 91.432686,
    High: 105.770844,
    Low: 74.57016,
    Close: 88.384613,
    "Adj Close": 88.384613,
    Volume: 2765445400,
    "Average Price": 74.41552,
    year: 2022,
    Period: "M02",
  },
  {
    Date: "2022-03-01",
    Open: 88.401993,
    High: 100.044998,
    Low: 74.26088,
    Close: 94.544815,
    "Adj Close": 94.544815,
    Volume: 3986012091,
    "Average Price": 72.4710695,
    year: 2022,
    Period: "M03",
  },
  {
    Date: "2022-04-01",
    Open: 94.562134,
    High: 101.380516,
    Low: 70.681259,
    Close: 71.376244,
    "Adj Close": 71.376244,
    Volume: 3659153644,
    "Average Price": 58.1838395,
    year: 2022,
    Period: "M04",
  },
  {
    Date: "2022-05-01",
    Open: 71.376503,
    High: 79.581696,
    Low: 45.68642,
    Close: 54.19136,
    "Adj Close": 54.19136,
    Volume: 5548785079,
    "Average Price": 44.2801435,
    year: 2022,
    Period: "M05",
  },
  {
    Date: "2022-06-01",
    Open: 54.197964,
    High: 67.164711,
    Low: 42.873867,
    Close: 55.416965,
    "Adj Close": 55.416965,
    Volume: 3869954804,
    "Average Price": 47.160408,
    year: 2022,
    Period: "M06",
  },
];
const baconData = [
  {
    year: 2022,
    period: "M06",
    periodName: "June",
    latest: "true",
    value: "7.403",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.039",
        "3": "0.200",
        "6": "0.192",
        "12": "0.733",
      },
      pct_changes: {
        "1": "0.5",
        "3": "2.8",
        "6": "2.7",
        "12": "11.0",
      },
    },
  },
  {
    year: 2022,
    period: "M05",
    periodName: "May",
    value: "7.364",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.058",
        "3": "0.267",
        "6": "0.099",
        "12": "1.018",
      },
      pct_changes: {
        "1": "-0.8",
        "3": "3.8",
        "6": "1.4",
        "12": "16.0",
      },
    },
  },
  {
    year: 2022,
    period: "M04",
    periodName: "April",
    value: "7.422",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.219",
        "3": "0.200",
        "6": "0.105",
        "12": "1.207",
      },
      pct_changes: {
        "1": "3.0",
        "3": "2.8",
        "6": "1.4",
        "12": "19.4",
      },
    },
  },
  {
    year: 2022,
    period: "M03",
    periodName: "March",
    value: "7.203",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.106",
        "3": "-0.008",
        "6": "-0.017",
        "12": "1.351",
      },
      pct_changes: {
        "1": "1.5",
        "3": "-0.1",
        "6": "-0.2",
        "12": "23.1",
      },
    },
  },
  {
    year: 2022,
    period: "M02",
    periodName: "February",
    value: "7.097",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.125",
        "3": "-0.168",
        "6": "0.001",
        "12": "1.319",
      },
      pct_changes: {
        "1": "-1.7",
        "3": "-2.3",
        "6": "0.0",
        "12": "22.8",
      },
    },
  },
  {
    year: 2022,
    period: "M01",
    periodName: "January",
    value: "7.222",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.011",
        "3": "-0.095",
        "6": "0.365",
        "12": "1.391",
      },
      pct_changes: {
        "1": "0.2",
        "3": "-1.3",
        "6": "5.3",
        "12": "23.9",
      },
    },
  },
  {
    year: 2021,
    period: "M12",
    periodName: "December",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M11",
    periodName: "November",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M10",
    periodName: "October",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M09",
    periodName: "September",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M08",
    periodName: "August",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M07",
    periodName: "July",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M06",
    periodName: "June",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M05",
    periodName: "May",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M04",
    periodName: "April",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M03",
    periodName: "March",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M02",
    periodName: "February",
    latest: "true",
    value: null,
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
      pct_changes: {
        "1": null,
        "3": null,
        "6": null,
        "12": null,
      },
    },
  },
  {
    year: 2021,
    period: "M01",
    periodName: "January",
    latest: "true",
    value: "5.831",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.000",
        "3": "0.109",
        "6": "0.055",
        "12": "0.326",
      },
      pct_changes: {
        "1": "0.0",
        "3": "1.9",
        "6": "1.0",
        "12": "5.9",
      },
    },
  },
  {
    year: 2020,
    period: "M12",
    periodName: "December",
    value: "5.831",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.077",
        "3": "0.212",
        "6": "0.059",
      },
      pct_changes: {
        "1": "1.3",
        "3": "3.8",
        "6": "1.0",
      },
    },
  },
  {
    year: 2020,
    period: "M11",
    periodName: "November",
    value: "5.754",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.032",
        "3": "0.195",
        "6": "0.406",
      },
      pct_changes: {
        "1": "0.6",
        "3": "3.5",
        "6": "7.6",
      },
    },
  },
  {
    year: 2020,
    period: "M10",
    periodName: "October",
    value: "5.722",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.103",
        "3": "-0.054",
        "6": "0.376",
      },
      pct_changes: {
        "1": "1.8",
        "3": "-0.9",
        "6": "7.0",
      },
    },
  },
  {
    year: 2020,
    period: "M09",
    periodName: "September",
    value: "5.619",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.060",
        "3": "-0.153",
        "6": "0.362",
      },
      pct_changes: {
        "1": "1.1",
        "3": "-2.7",
        "6": "6.9",
      },
    },
  },
  {
    year: 2020,
    period: "M08",
    periodName: "August",
    value: "5.559",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.217",
        "3": "0.211",
        "6": "0.062",
      },
      pct_changes: {
        "1": "-3.8",
        "3": "3.9",
        "6": "1.1",
      },
    },
  },
  {
    year: 2020,
    period: "M07",
    periodName: "July",
    value: "5.776",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.004",
        "3": "0.430",
        "6": "0.271",
      },
      pct_changes: {
        "1": "0.1",
        "3": "8.0",
        "6": "4.9",
      },
    },
  },
  {
    year: 2020,
    period: "M06",
    periodName: "June",
    value: "5.772",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.424",
        "3": "0.515",
      },
      pct_changes: {
        "1": "7.9",
        "3": "9.8",
      },
    },
  },
  {
    year: 2020,
    period: "M05",
    periodName: "May",
    value: "5.348",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.002",
        "3": "-0.149",
      },
      pct_changes: {
        "1": "0.0",
        "3": "-2.7",
      },
    },
  },
  {
    year: 2020,
    period: "M04",
    periodName: "April",
    value: "5.346",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.089",
        "3": "-0.159",
      },
      pct_changes: {
        "1": "1.7",
        "3": "-2.9",
      },
    },
  },
  {
    year: 2020,
    period: "M03",
    periodName: "March",
    value: "5.257",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.240",
      },
      pct_changes: {
        "1": "-4.4",
      },
    },
  },
  {
    year: 2020,
    period: "M02",
    periodName: "February",
    value: "5.497",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.008",
      },
      pct_changes: {
        "1": "-0.1",
      },
    },
  },
  {
    year: 2020,
    period: "M01",
    periodName: "January",
    value: "5.505",
    aspects: [],
    footnotes: [{}],
  },
  {
    year: 2019,
    period: "M12",
    periodName: "December",
    value: "5.474",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.031",
        "3": "-0.097",
        "6": "-0.404",
        "12": "-0.028",
      },
      pct_changes: {
        "1": "-0.6",
        "3": "-1.7",
        "6": "-6.9",
        "12": "-0.5",
      },
    },
  },
  {
    year: 2019,
    period: "M11",
    periodName: "November",
    value: "5.505",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.148",
        "3": "-0.071",
        "6": "-0.307",
        "12": "0.113",
      },
      pct_changes: {
        "1": "-2.6",
        "3": "-1.3",
        "6": "-5.3",
        "12": "2.1",
      },
    },
  },
  {
    year: 2019,
    period: "M10",
    periodName: "October",
    value: "5.653",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.082",
        "3": "-0.048",
        "6": "0.101",
        "12": "0.283",
      },
      pct_changes: {
        "1": "1.5",
        "3": "-0.8",
        "6": "1.8",
        "12": "5.3",
      },
    },
  },
  {
    year: 2019,
    period: "M09",
    periodName: "September",
    value: "5.571",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.005",
        "3": "-0.307",
        "6": "-0.037",
        "12": "0.070",
      },
      pct_changes: {
        "1": "-0.1",
        "3": "-5.2",
        "6": "-0.7",
        "12": "1.3",
      },
    },
  },
  {
    year: 2019,
    period: "M08",
    periodName: "August",
    value: "5.576",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.125",
        "3": "-0.236",
        "6": "0.074",
        "12": "-0.001",
      },
      pct_changes: {
        "1": "-2.2",
        "3": "-4.1",
        "6": "1.3",
        "12": "0.0",
      },
    },
  },
  {
    year: 2019,
    period: "M07",
    periodName: "July",
    value: "5.701",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.177",
        "3": "0.149",
        "6": "0.183",
        "12": "0.283",
      },
      pct_changes: {
        "1": "-3.0",
        "3": "2.7",
        "6": "3.3",
        "12": "5.2",
      },
    },
  },
  {
    year: 2019,
    period: "M06",
    periodName: "June",
    value: "5.878",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.066",
        "3": "0.270",
        "6": "0.376",
        "12": "0.631",
      },
      pct_changes: {
        "1": "1.1",
        "3": "4.8",
        "6": "6.8",
        "12": "12.0",
      },
    },
  },
  {
    year: 2019,
    period: "M05",
    periodName: "May",
    value: "5.812",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.260",
        "3": "0.310",
        "6": "0.420",
        "12": "0.360",
      },
      pct_changes: {
        "1": "4.7",
        "3": "5.6",
        "6": "7.8",
        "12": "6.6",
      },
    },
  },
  {
    year: 2019,
    period: "M04",
    periodName: "April",
    value: "5.552",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.056",
        "3": "0.034",
        "6": "0.182",
        "12": "0.131",
      },
      pct_changes: {
        "1": "-1.0",
        "3": "0.6",
        "6": "3.4",
        "12": "2.4",
      },
    },
  },
  {
    year: 2019,
    period: "M03",
    periodName: "March",
    value: "5.608",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.106",
        "3": "0.106",
        "6": "0.107",
        "12": "0.081",
      },
      pct_changes: {
        "1": "1.9",
        "3": "1.9",
        "6": "1.9",
        "12": "1.5",
      },
    },
  },
  {
    year: 2019,
    period: "M02",
    periodName: "February",
    value: "5.502",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "-0.016",
        "3": "0.110",
        "6": "-0.075",
        "12": "-0.031",
      },
      pct_changes: {
        "1": "-0.3",
        "3": "2.0",
        "6": "-1.3",
        "12": "-0.6",
      },
    },
  },
  {
    year: 2019,
    period: "M01",
    periodName: "January",
    value: "5.518",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.016",
        "3": "0.148",
        "6": "0.100",
        "12": "-0.136",
      },
      pct_changes: {
        "1": "0.3",
        "3": "2.8",
        "6": "1.8",
        "12": "-2.4",
      },
    },
  },
  {
    year: 2018,
    period: "M12",
    periodName: "December",
    value: "5.502",
    aspects: [],
    footnotes: [{}],
    calculations: {
      net_changes: {
        "1": "0.110",
        "3": "0.001",
        "6": "0.255",
        "12": "-0.127",
      },
      pct_changes: {
        "1": "2.0",
        "3": "0.0",
        "6": "4.9",
        "12": "-2.3",
      },
    },
  },
];

export default defineComponent({
  name: "BaconChart",
  components: {
    Line,
  },
  computed: {
    bsvDataMonthlyHistoricalPriceLabels() {
      return this.bsvData.map((obj) => obj.Date);
    },
    baconMonthlyHistoricalPriceLabels() {
      return this.bsvData.map((obj) => obj.year);
    },
  },
  props: {
    chartId: {
      type: String,
      default: "line-chart",
    },
    width: {
      type: Number,
      default: 400,
    },
    height: {
      type: Number,
      default: 400,
    },
    cssClasses: {
      default: "",
      type: String,
    },
    styles: {
      type: Object,
      default: () => {},
    },
    plugins: {
      type: Array,
      default: () => [],
    },
    bsvData: {
      type: Object,
      default: () => bsvData,
    },
    baconData: {
      type: Object,
      default: () => baconData,
    },
  },
  setup(props) {
    const labels = bsvData.map((obj) => `${obj.year} + ${obj.Period}`);

    const result = bsvData
      .reverse()
      .map((item, i) => {
        if (item.year === baconData[i].year) {
          //merging two objects
          return Object.assign({}, item, baconData[i]);
        }
      })
      .reverse();

    const baconPricesBeforeNullCheck = result
      .map((obj) => obj.value * (1 / obj["Average Price"]) * 100000000)
      .reverse();

    const baconPrices = baconPricesBeforeNullCheck
      .map((obj) => {
        if (obj === 0) {
          return null;
        } else {
          return obj;
        }
      })
      .reverse();

    // const pricesInSats = combinedPrices.map((obj) => obj.value);
    const chartData = {
      labels: labels,
      datasets: [
        {
          label: "Price of 1lb of Bacon in Satoshis",
          backgroundColor: "#f87979",
          data: baconPrices,
        },
      ],
    };

    const chartOptions = {
      responsive: true,
      maintainAspectRatio: false,
    };

    return () =>
      h(Line, {
        bsvData: props.bsvData,
        baconData: props.baconData,
        chartData,
        chartOptions,
        chartId: props.chartId,
        width: props.width,
        height: props.height,
        cssClasses: props.cssClasses,
        styles: props.styles,
        plugins: props.plugins,
      });
  },
});
